# üöÄ –î–µ–ø–ª–æ–π –Ω–∞ shared-—Ö–æ—Å—Ç–∏–Ω–≥ –±–µ–∑ Docker (cPanel/Passenger/WSGI)

–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —à–∞—Ä–µ–¥-—Ö–æ—Å—Ç–∏–Ω–≥–∞ –±–µ–∑ root –∏ –±–µ–∑ systemd. –†–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ Python –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ WSGI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (Passenger). –ë–æ—Ç –ø–µ—Ä–µ–≤–µ–¥—ë–Ω –≤ —Ä–µ–∂–∏–º polling –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –∏ –≥–æ—Ç–æ–≤ –∫ –≤–µ–±—Ö—É–∫—É —á–µ—Ä–µ–∑ WSGI –Ω–∞ –ø—Ä–æ–¥–µ.

## –ß—Ç–æ –¥–µ–ø–ª–æ–∏–º
- –ü–∞–ø–∫–∞ `spravuz-bot/`
- –§–∞–π–ª `spravuz-bot/requirements.txt`
- –§–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–µ–∫ `.env` (—Å–æ–∑–¥–∞—ë—Ç–µ –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥–µ)
- WSGI –≤—Ö–æ–¥–Ω–∞—è —Ç–æ—á–∫–∞ `spravuz-bot/passenger_wsgi.py`

## 1) –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–¥–∞
–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `spravuz-bot/` –≤ –ø–∞–ø–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `~/apps/spravuz-bot`). –ß–µ—Ä–µ–∑ SFTP/FTP –∏–ª–∏ Git.

## 2) –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
–í cPanel: Setup Python App ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ Python 3.10+ ‚Üí —É–∫–∞–∂–∏—Ç–µ –ø–∞–ø–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ‚Üí Create. –ó–∞—Ç–µ–º Activate –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:
```bash
pip install -r spravuz-bot/requirements.txt
```

–ï—Å–ª–∏ –Ω–µ—Ç –º–∞—Å—Ç–µ—Ä–∞ cPanel, —Å–æ–∑–¥–∞–π—Ç–µ –≤—Ä—É—á–Ω—É—é:
```bash
python3 -m venv venv
source venv/bin/activate
pip install -r spravuz-bot/requirements.txt
```

## 3) .env
–í –ø–∞–ø–∫–µ `spravuz-bot/` —Å–æ–∑–¥–∞–π—Ç–µ `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ `env.example`:
```env
BOT_TOKEN=xxxx
ADMIN_USERNAME=admin
ADMIN_PASSWORD=strongpass
MANAGER_USERNAME=manager
MANAGER_PASSWORD=anotherpass
SECRET_KEY=replace_me
PUBLIC_BASE_URL=https://your-domain.tld
WEBHOOK_PATH=/telegram/webhook
```

## 4) passenger_wsgi.py
–í –∫–æ—Ä–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (`spravuz-bot/`) –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ñ–∞–π–ª `passenger_wsgi.py` (–æ–Ω —Å–æ–∑–¥–∞—ë—Ç—Å—è –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏). Passenger –±—É–¥–µ—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å `application` –∏–∑ –Ω–µ–≥–æ.

## 5) –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–∞—Ä—à—Ä—É—Ç–∞ –≤–µ–±—Ö—É–∫–∞
Telegram –¥–æ–ª–∂–µ–Ω —Å—Ç—É—á–∞—Ç—å—Å—è –≤ –ø—É–±–ª–∏—á–Ω—ã–π URL: `PUBLIC_BASE_URL + WEBHOOK_PATH`.
- –í cPanel —Å–≤—è–∂–∏—Ç–µ –¥–æ–º–µ–Ω/–ø–æ–¥–¥–æ–º–µ–Ω —Å –ø–∞–ø–∫–æ–π `spravuz-bot/`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ URL –≤–∏–¥–∞ `https://your-domain.tld/telegram/webhook` –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑–≤–Ω–µ –ø–æ HTTPS

## 6) –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤–µ–±—Ö—É–∫–∞
Passenger –ø–æ–¥–Ω–∏–º–µ—Ç WSGI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç –≤–µ–±—Ö—É–∫. –ï—Å–ª–∏ –∞–¥—Ä–µ—Å –º–µ–Ω—è–µ—Ç—Å—è, —É–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—ã–π –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ (—Å–º. —Ä–∞–∑–¥–µ–ª ¬´–°–±—Ä–æ—Å –≤–µ–±—Ö—É–∫–∞¬ª).

## 7) –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
–û—Ç–∫—Ä—ã–≤–∞–π—Ç–µ `https://your-domain.tld` ‚Äî —ç—Ç–æ Flask-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ. –õ–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å –∏–∑ `.env`.

## –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (–±–µ–∑ —Å–µ—Ä–≤–µ—Ä–∞)
```bash
cd spravuz-bot
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt
cp env.example .env  # –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è
python admin_panel.py  # –∑–∞–ø—É—Å—Ç–∏—Ç –∞–¥–º–∏–Ω–∫—É –Ω–∞ 0.0.0.0:5050
python bot.py         # –æ—Ç–¥–µ–ª—å–Ω—ã–π polling-–±–æ—Ç (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
```

## –°–±—Ä–æ—Å –≤–µ–±—Ö—É–∫–∞
–ò–Ω–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–π –≤–µ–±—Ö—É–∫:
```bash
curl -s "https://api.telegram.org/bot$BOT_TOKEN/deleteWebhook"
```
–ò –∑–∞—Ç–µ–º –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Passenger (–≤ cPanel ‚Üí Restart App) –∏–ª–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å `passenger_wsgi.py`.

## –¢—Ä–∞–±–ª—à—É—Ç–∏–Ω–≥
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Passenger (Error log –≤ cPanel) –∏ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –µ—Å—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å –≤ `spravuz_bot.db` –∏ `data/`.
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `PUBLIC_BASE_URL` –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ HTTPS.